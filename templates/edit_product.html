{% extends 'base.html' %}
{% block title %}Редактировать товар - {{ product.name }}{% endblock %}
{% block content %}
<h1>Редактировать товар: {{ product.name }}</h1>

<form method="post" enctype="multipart/form-data" class="w-50">
    <div class="mb-3">
        <label class="form-label">Название товара</label>
        <input type="text" name="name" class="form-control" value="{{ product.name }}" required>
    </div>
    
    <div class="mb-3">
        <label class="form-label">Описание</label>
        <textarea name="description" class="form-control" rows="4">{{ product.description }}</textarea>
    </div>
    
    <div class="mb-3">
        <label class="form-label">Цена ($)</label>
        <input type="number" step="0.01" name="price" class="form-control" value="{{ product.price }}" required>
    </div>
    
    <div class="mb-3">
        <label class="form-label">Текущее изображение</label>
        <div class="mb-2">
            <img src="{{ product.get_image() }}" style="max-width: 200px; max-height: 200px; object-fit: contain; background-color: #f8f9fa;" class="img-thumbnail">
        </div>
        {% if product.image_filename or product.image_url %}
        <div class="form-check mb-2">
            <input class="form-check-input" type="checkbox" name="remove_image" id="remove_image">
            <label class="form-check-label" for="remove_image">
                Удалить текущее изображение
            </label>
        </div>
        {% endif %}
    </div>
    
    <div class="mb-3">
        <label class="form-label">Новое локальное изображение</label>
        <input type="file" name="image_file" class="form-control" accept="image/*">
        <div class="form-text">Макс. размер: 5MB. Разрешены: JPG, PNG, GIF, WEBP</div>
    </div>
    
    <div class="mb-3">
        <label class="form-label">ИЛИ новый URL изображения</label>
        <input type="url" name="image_url" class="form-control" 
               placeholder="https://example.com/image.jpg" 
               value="{{ product.image_url if product.image_url else '' }}">
        <div class="form-text">Оставьте пустым, если используете локальный файл</div>
    </div>
    
    <div class="mb-3">
        <button type="submit" class="btn btn-primary">Сохранить изменения</button>
        <a href="{{ url_for('admin.products') }}" class="btn btn-secondary">Отмена</a>
    </div>
</form>
{% endblock %}