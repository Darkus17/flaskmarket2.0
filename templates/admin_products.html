{% extends 'base.html' %}
{% block title %}Админ - Товары{% endblock %}
{% block content %}
<h1>Админ: Товары</h1>
<table class="table">
    <tr><th>ID</th>
        <th>Изображение</th>
        <th>Имя</th>
        <th>Цена</th>
        <th>Действия</th>
    </tr>
    {% for product in products %}
    <tr><td>{{ product.id }}</td>
        <td><img src="{{ product.get_image() }}" style="max-width: 50px; max-height: 50px; object-fit: contain; background-color: #f8f9fa;"></td>
        <td>{{ product.name }}</td><td>{{ product.price }}</td>
    <td>
            <!-- КНОПКА РЕДАКТИРОВАНИЯ -->
            <a href="{{ url_for('admin.edit_product', product_id=product.id) }}" 
               class="btn btn-sm btn-primary">Редактировать</a>
            <a href="{{ url_for('admin.delete_product', product_id=product.id) }}" 
               class="btn btn-sm btn-danger" 
               onclick="return confirm('Удалить товар?')">Удалить</a>
        </td>
    </tr>
    {% endfor %}
</table>
<h3>Добавить товар</h3>
<form method="post" enctype="multipart/form-data" class="w-50">
    <div class="mb-3">
        <label class="form-label">Имя</label>
        <input type="text" name="name" class="form-control">
    </div>
    <div class="mb-3">
        <label class="form-label">Описание</label>
        <textarea name="description" class="form-control"></textarea>
    </div>
    <div class="mb-3">
        <label class="form-label">Цена</label>
        <input type="number" step="0.01" name="price" class="form-control">
    </div>
    <div class="mb-3">
        <label class="form-label">Локальное изображение</label>
        <input type="file" name="image_file" class="form-control" accept="image/*">
        <div class="form-text">Макс. размер: 5MB. Разрешены: JPG, PNG, GIF, WEBP</div>
    </div>
    
    <div class="mb-3">
        <label class="form-label">ИЛИ URL изображения</label>
        <input type="url" name="image_url" class="form-control" placeholder="https://example.com/image.jpg">
    </div>
    <button class="btn btn-success">Добавить</button>
</form>
{% endblock %}